FROM joegagliardo/ubuntu
MAINTAINER joegagliardo
ARG SPARK_CASSANDRA_VERSION=2.0.1-s_2.11
ARG SPARK_CASSANDRA_BASE_URL=http://dl.bintray.com/spark-packages/maven/datastax/spark-cassandra-connector
ARG SPARK_CASSANDRA_URL=${SPARK_CASSANDRA_BASE_URL}/${SPARK_CASSANDRA_VERSION}/spark-cassandra-connector-${SPARK_CASSANDRA_VERSION}.jar
ARG SPARK_CASSANDRA_FILE=spark-cassandra-connector-${SPARK_CASSANDRA_VERSION}.jar

RUN echo "*************" && \
    mkdir /usr/local/spark && \
    mkdir /usr/local/spark/jars && \
	cd /data && \
    echo ${SPARK_CASSANDRA_URL} && \
	wget ${SPARK_CASSANDRA_URL} && \
    mv ${SPARK_CASSANDRA_FILE} /usr/local/spark/jars && \
	ln -s /usr/local/spark/jars/${SPARK_CASSANDRA_FILE} /usr/local/spark/jars/spark-cassandra-connector.jar && \
    echo "*************" 
RUN echo "*************" && \
	cd /data && \
	git clone https://github.com/minrk/findspark.git && \
	cd findspark && \
#    python2 setup.py install && \
#	python3 setup.py install && \
    echo "*************" 
RUN echo "*************" && \
	cd /data && \
	rm -r /data/findspark && \
    apt-get -y clean && \
    apt-get -y autoremove && \
    rm -rf /var/lib/apt/lists/* && \
    echo "" > /data/scripts/notes.txt

# http://dl.bintray.com/spark-packages/maven/datastax/spark-cassandra-connector/2.0.1-s_2.11/spark-cassandra-connector-2.0.1-s_2.11.jar && \
# http://dl.bintray.com/spark-packages/maven/datastax/spark-cassandra-connector/hadoop-2.0.1-s_2.11/spark-cassandra-connector-2.0.1-s_2.11.jar